<!DOCTYPE html>
<html lang="en">

<head>
  <title>Shell</title>
  <link rel="stylesheet" href="{{baseURI}}/stylesheets/style.css">

  <script src="{{baseURI}}/javascripts/hterm_all_1.85.js"></script>
  <script src="{{baseURI}}/javascripts/ood_shell.1.js"></script>

  <style>
  #colors_dd {
    position: fixed;
    top: 0;
    right: 0;
    z-index: 1;
    background-color: white;
    padding: 5px;
  }
  </style>
</head>

<body>
  <div id="colors_dd">
    Colors:
    <select id="colors">
      <option value="default">Default</option>
      <option value="solarized-light">Solarized Light</option>
      <option value="solarized-dark">Solarized Dark</option>
      <option value="clrs">CLRS</option>
      <option value="zenburn">Zenburn</option>
    </select>
  </div>
  <div id="terminal"></div>
</body>

<script>
  var oodShell;

  setupHterm = function () {
    // Global variables that define the terminal
    var terminalContainer = document.getElementById('terminal'),
      webSocketUrl      = document.URL.replace(/^http/, 'ws').replace(/#.*$/, ''),
      terminalPrefs     = {
        'use-default-window-copy': true,
        'ctrl-v-paste': true,
        'ctrl-c-copy': true
      };

    // hterm default preferences are defined here. Switch to the tag that we're using.
    // https://chromium.googlesource.com/apps/libapps/+/master/hterm/js/hterm_preference_manager.js

    oodShell = new OodShell(terminalContainer, webSocketUrl, terminalPrefs);
    oodShell.createTerminal();
  }

  window.onload = function() {
    lib.init(setupHterm);
  };

document.querySelector('#colors').addEventListener('change', function(e){
    var set = function(props){
      console.log("attempting to set props");
      for(var key in props){
        if(props.hasOwnProperty(key)){
          oodShell.term.prefs_.set(key, props[key]);
        }
      }
    }, theme = event.target.value;

    if(theme == "solarized-dark"){
      set({
          'background-color': "#002b36", // base02
          'foreground-color': '#eee8d5', // base2
          'cursor-color': "rgb(112,130,132)",

          'color-palette-overrides': [
            '#073642', // base02
            // '#dc322f', // red - this was from xterm
            'rgb(208, 28, 36)', // red -- this was from iTerm converted to rgb
            '#859900', // green
            '#b58900', // yellow
            '#268bd2', // blue
            '#d33682', // magenta
            '#2aa198', // cyan
            '#eee8d5', // base2
            '#002b36', // base03
            '#cb4b16', // orange
            '#586e75', // base01
            '#657b83', // base00
            '#839496', // base0
            '#6c71c4', // violet
            '#93a1a1', // base1
            '#fdf6e3'  // base3
          ]
      });
    }
    else if(theme == "solarized-light"){
      console.log("use solarized light theme");
      set({
            'background-color': "rgb(252,244,220)",
            'foreground-color': "rgb(83,104,112)",
            'cursor-color': "rgb(83,104,112)",
            'color-palette-overrides':['rgb(0,40,49)',
            'rgb(209,28,36)',
            'rgb(115,138,5)',
            'rgb(165,119,6)',
            'rgb(33,118,199)',
            'rgb(198,28,111)',
            'rgb(37,146,134)',
            'rgb(234,227,203)',
            'rgb(0,30,39)',
            'rgb(189,54,19)',
            'rgb(71,91,98)',
            'rgb(83,104,112)',
            'rgb(112,130,132)',
            'rgb(89,86,186)',
            'rgb(129,144,144)',
            'rgb(252,244,220)']
          });
    }
    else if(theme == "clrs"){
        set(
            {
              'background-color': "rgb(255,255,255)",
              'foreground-color': "rgb(38,38,38)",
              'cursor-color': "rgb(111,211,252)",
              'color-palette-overrides':['rgb(0,0,0)',
              'rgb(248,40,42)',
              'rgb(50,138,93)',
              'rgb(250,112,29)',
              'rgb(19,92,208)',
              'rgb(159,0,189)',
              'rgb(51,195,193)',
              'rgb(179,179,179)',
              'rgb(85,87,83)',
              'rgb(251,4,22)',
              'rgb(44,198,49)',
              'rgb(253,215,39)',
              'rgb(22,112,255)',
              'rgb(233,0,176)',
              'rgb(58,213,206)',
              'rgb(238,238,236)']
            }
            );

    }
    else if(theme == "zenburn"){
        set({
      'background-color': "rgb(63,63,63)",
      'foreground-color': "rgb(220,220,204)",
      'cursor-color': "rgb(115,99,90)",
      'color-palette-overrides':['rgb(77,77,77)',
      'rgb(112,80,80)',
      'rgb(96,180,138)',
      'rgb(240,223,175)',
      'rgb(80,96,112)',
      'rgb(220,140,195)',
      'rgb(140,208,211)',
      'rgb(220,220,204)',
      'rgb(112,144,128)',
      'rgb(220,163,163)',
      'rgb(195,191,159)',
      'rgb(224,207,159)',
      'rgb(148,191,243)',
      'rgb(236,147,211)',
      'rgb(147,224,227)',
      'rgb(255,255,255)']
    });
    }

    else{
      console.log("use default theme");
      set({
          'background-color': "rgb(16, 16, 16)",
          'foreground-color': "rgb(240, 240, 240)",
          'color-palette-overrides': null
      });
    }
});
</script>



</html>
